# –õ–µ–∫—Ü–∏—è: WebRTC –≤ Flutter (04. WebRTC)

---

## 1. –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ WebRTC

### 1.1 –ß—Ç–æ —Ç–∞–∫–æ–µ WebRTC?

WebRTC (**Web Real-Time Communication**) ‚Äî —ç—Ç–æ **–æ—Ç–∫—Ä—ã—Ç–∞—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è** –¥–ª—è **—Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏**, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç **—Ç—Ä–∞–Ω—Å–ª–∏—Ä–æ–≤–∞—Ç—å –∞—É–¥–∏–æ, –≤–∏–¥–µ–æ –∏ –¥–∞–Ω–Ω—ã–µ –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–∞—Ö –∏–ª–∏ –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ü–û**. –û–Ω–∞ –±—ã–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–∞ Google –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ W3C –∏ IETF.

### 1.2 –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã WebRTC

WebRTC —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ **—Ç—Ä–µ—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–æ–¥—É–ª–µ–π**, –∫–æ—Ç–æ—Ä—ã–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç –º–µ–∂–¥—É —Å–æ–±–æ–π:

#### 1.2.1. **–ú–µ–¥–∏–∞-—Å—Ç–µ–∫ (Media Stack)**
–û—Ç–≤–µ—á–∞–µ—Ç –∑–∞:
- –ó–∞—Ö–≤–∞—Ç –∞—É–¥–∏–æ –∏ –≤–∏–¥–µ–æ —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∫–∞–º–µ—Ä–∞, –º–∏–∫—Ä–æ—Ñ–æ–Ω).
- –ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ/–¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–¥–∏–∞–¥–∞–Ω–Ω—ã—Ö (—Å–∂–∞—Ç–∏–µ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –ø–æ —Å–µ—Ç–∏).
- –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ —á–µ—Ä–µ–∑ **P2P** (—Ç–æ—á–∫–∞-—Ç–æ—á–∫–∞) —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.

–ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è: H.264, VP8/VP9; –ø—Ä–∏–º–µ—Ä—ã –∞—É–¥–∏–æ: G.711, Opus.

#### 1.2.2. **–°–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏—è (Signaling)**
WebRTC –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º—ã –¥–ª—è **—É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è** –º–µ–∂–¥—É —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ ‚Äî —ç—Ç–æ –∑–∞–¥–∞—á–∞ —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏–∏. –û—Å–Ω–æ–≤–Ω—ã–µ —à–∞–≥–∏:
- –û–±–º–µ–Ω –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, IP-–∞–¥—Ä–µ—Å–∞, –ø–æ—Ä—Ç—ã, –∫–æ–¥–µ–∫–∏).
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ **ICE (Interactive Connectivity Establishment)** —Å–µ—Ä–≤–µ—Ä–∞–º.
- –°–æ–∑–¥–∞–Ω–∏–µ **SDP (Session Description Protocol)** –æ–ø–∏—Å–∞–Ω–∏–π —Å–µ—Å—Å–∏–π.

–°–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ WebSocket, SIP, HTTP –∏–ª–∏ –ª—é–±—ã–º –¥—Ä—É–≥–∏–º –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º.

#### 1.2.3. **ICE –∏ STUN/TURN —Å–µ—Ä–≤–µ—Ä—ã**
- **ICE** ‚Äî –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –ø–æ–∏—Å–∫–∞ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –ø—É—Ç–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–∞–º–∏ (P2P).
- **STUN (Session Traversal Utilities for NAT)** ‚Äî –ø–æ–º–æ–≥–∞–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å IP-–∞–¥—Ä–µ—Å–∞ –∏ –ø–æ—Ä—Ç—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤, –µ—Å–ª–∏ –æ–Ω–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –∑–∞ **NAT (Network Address Translation)**.
- **TURN (Traversal Using Relays around NAT)** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∫–æ–≥–¥–∞ P2P —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑-–∑–∞ —Å—Ç—Ä–æ–≥–∏—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ NAT). –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π —Å–µ—Ä–≤–µ—Ä.

### 1.3 –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ WebRTC
- **–ù–∏–∑–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞** (–º–µ–Ω–µ–µ 100 –º—Å –¥–ª—è –∞—É–¥–∏–æ, –¥–æ 200 –º—Å ‚Äî –¥–ª—è –≤–∏–¥–µ–æ).
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **–º–Ω–æ–∂–µ—Å—Ç–≤–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤** (–º—É–ª—å—Ç–∏–∫–∞—Å—Ç, –∫–æ–º–Ω–∞—Ç—ã —Å —Ç—Ä–∞–Ω—Å–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º).
- –†–∞–±–æ—Ç–∞–µ—Ç –≤ **–±—Ä–∞—É–∑–µ—Ä–∞—Ö –∏ –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö**, –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–ª–∞–≥–∏–Ω–æ–≤.
- –û—Ç–∫—Ä—ã—Ç—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç: –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –ª—é–±—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏.

---

## 2. –ü—Ä–æ–µ–∫—Ç LiveKit –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `livekit_client`

### 2.1 –ß—Ç–æ —Ç–∞–∫–æ–µ LiveKit?

**LiveKit** ‚Äî —ç—Ç–æ **–º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞—è —Å–µ—Ä–≤–µ—Ä–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è WebRTC**, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–æ–π **Agora, Twilio, –∏ –¥—Ä—É–≥–∏—Ö –∫—Ä—É–ø–Ω—ã—Ö –∫–æ–º–ø–∞–Ω–∏–π**. –û–Ω–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å **–≤–∏–¥–µ–æ-–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏, –ø–æ—Ç–æ–∫–æ–≤—ã–µ —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏, –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è** –∏ —Ç.–¥., –∏—Å–ø–æ–ª—å–∑—É—è **WebRTC –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º**.

### 2.2 –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ LiveKit
1. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –º–∏–ª–ª–∏–æ–Ω–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.
2. **–ù–∏–∑–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞**: –±–ª–∞–≥–æ–¥–∞—Ä—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–æ–¥–µ–∫–æ–≤ –∏ P2P —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º.
3. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤**: –≤–∫–ª—é—á–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ —Ç—Ä–∞–Ω—Å–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ (–∑–∞–º–æ—Ä–æ–∑–∫–∞/–≤–∫–ª—é—á–µ–Ω–∏–µ –≤–∏–¥–µ–æ).
4. **–ì–æ—Ç–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞**: –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–µ—Ä–≤–µ—Ä–Ω—É—é —á–∞—Å—Ç—å, —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏—é, STUN/TURN-—Å–µ—Ä–≤–µ—Ä—ã –∏ –¥—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã.
5. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Flutter**: —á–µ—Ä–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫—É `livekit_client`, –∫–æ—Ç–æ—Ä–∞—è —É–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å WebRTC –≤ –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö.

### 2.3 –ß—Ç–æ —Ç–∞–∫–æ–µ `livekit_client`?

**livekit_client** ‚Äî —ç—Ç–æ –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è **Flutter –∏ Dart**, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç **–∞–±—Å—Ç—Ä–∞–∫—Ü–∏—é –Ω–∞–¥ WebRTC**. –û–Ω–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- –ü–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É LiveKit.
- –°–æ–∑–¥–∞–≤–∞—Ç—å –∫–æ–º–Ω–∞—Ç—ã, –¥–æ–±–∞–≤–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
- –ü–æ–ª—É—á–∞—Ç—å –∞—É–¥–∏–æ/–≤–∏–¥–µ–æ –ø–æ—Ç–æ–∫–∏.
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞).

### 2.4 –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ `livekit_client`:
1. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É**:
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç WebSocket –¥–ª—è —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏–∏.
   - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Ç–æ–∫–µ–Ω –∏–ª–∏ API-–∫–ª—é—á–∏.

2. **–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã (Room Creation)**:
   - –£—á–∞—Å—Ç–Ω–∏–∫ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é –∫–æ–º–Ω–∞—Ç—É —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∏–¥–µ–æ).

3. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏**:
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤.
   - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–µ–∫—Å—Ç–∞ –∏–ª–∏ –¥–∞–Ω–Ω—ã—Ö).
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∞–º–∏: –∫—Ç–æ –º–æ–∂–µ—Ç –≥–æ–≤–æ—Ä–∏—Ç—å, –≤–∏–¥–µ—Ç—å –≤–∏–¥–µ–æ –∏ —Ç.–¥.

4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –º–µ–¥–∏–∞–¥–∞–Ω–Ω—ã—Ö**:
   - –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫–æ–≤ —Å –¥—Ä—É–≥–∏—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤.
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ—Ç–æ–∫–æ–≤–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ (streaming) –¥–ª—è –±—Ä–æ–¥–∫–∞—Å—Ç–∏–Ω–≥–∞.

5. **–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è**:
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–¥–µ–∫–æ–≤, —Ä–∞–∑–º–µ—Ä–∞ –≤–∏–¥–µ–æ, –∫–∞—á–µ—Å—Ç–≤–∞ –∞—É–¥–∏–æ –∏ —Ç.–¥.
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Firebase, Supabase).

---

## 3. –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `livekit_client` –≤ Flutter

### 3.1 –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ LiveKit-—Å–µ—Ä–≤–µ—Ä—É

```dart
import 'package:livekit_client/livekit_client.dart';

void main() async {
  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞
  final client = await LivekitClient.connect(
    serverUrl: "wss://your-livekit-server.com", 
    token: "your-auth-token",
  );

  // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∫–æ–º–Ω–∞—Ç–µ
  final room = await client.joinRoom(
    name: "my-room-name", // –∏–º—è –∫–æ–º–Ω–∞—Ç—ã
    participantName: "user123", // –ò–º—è —É—á–∞—Å—Ç–Ω–∏–∫–∞
    options: RoomOptions(), // –æ–ø—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã)
  );

  // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
  print("Participants in room: ${room.participants}");

  // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è
  room.onParticipantJoined.listen((participant) {
    print("Participant joined: $participant");
  });
}
```

### 3.2 –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫–∞ –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```dart
import 'package:flutter/material.dart';
import 'package:livekit_client/livekit_client.dart';

class VideoView extends StatefulWidget {
  final Participant participant;

  const VideoView({required this.participant});

  @override
  _VideoViewState createState() => _VideoViewState();
}

class _VideoViewState extends State<VideoView> {
  late VideoTrack videoTrack;

  @override
  void initState() {
    super.initState();

    // –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫–∞ —É—á–∞—Å—Ç–Ω–∏–∫–∞
    widget.participant.videoTracks.first.then((track) {
      setState(() {
        videoTrack = track;
      });
    });
  }

  @override
  Widget build(BuildContext context) {
    if (videoTrack != null && videoTrack.track != null) {
      return VideoViewWidget(
        track: videoTrack,
        fit: BoxFit.cover,
      );
    } else {
      return Text("Waiting for video...");
    }
  }
}
```

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: `VideoViewWidget` ‚Äî —ç—Ç–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–∑ `livekit_client`, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤–∏–¥–µ–æ –ø–æ –∑–∞–¥–∞–Ω–Ω–æ–º—É –ø–æ—Ç–æ–∫—É.

### 3.3 –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç–æ–π

```dart
final room = await client.createRoom(
  name: "new-room", 
  options: RoomOptions(maxParticipants: 10),
);

// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞
await room.addParticipant(participant: newParticipant);
```

---

## 4. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ

### –ó–∞–¥–∞—á–∞:
–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ **Flutter**, –∫–æ—Ç–æ—Ä–æ–µ:
1. –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É LiveKit.
2. –°–æ–∑–¥–∞–µ—Ç –∫–æ–º–Ω–∞—Ç—É –¥–ª—è –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∞ —Å –¥–≤—É–º—è —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏.
3. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤–∏–¥–µ–æ –ø–æ—Ç–æ–∫–∏ –æ–±–æ–∏—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ.

### –®–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:

#### 4.1 –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```yaml
dependencies:
  flutter:
    sdk: flutter
  livekit_client: ^0.5.0
```

#### 4.2 –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

```dart
import 'package:flutter/material.dart';
import 'package:livekit_client/livekit_client.dart';

void main() => runApp(const MyApp());

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home: LiveKitScreen(),
    );
  }
}

class LiveKitScreen extends StatefulWidget {
  @override
  _LiveKitScreenState createState() => _LiveKitScreenState();
}

class _LiveKitScreenState extends State<LiveKitScreen> {
  late LivekitClient client;
  late Room room;

  @override
  void initState() {
    super.initState();

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∫–æ–º–Ω–∞—Ç–µ
    connectToLiveKit();
  }

  Future<void> connectToLiveKit() async {
    final client = await LivekitClient.connect(
      serverUrl: "wss://your-livekit-server.com",
      token: "your-auth-token",
    );

    final room = await client.joinRoom(
      name: "test-room", 
      participantName: "user123",
    );

    setState(() {
      this.client = client;
      this.room = room;
    });

    // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è
    room.onParticipantJoined.listen((participant) {
      print("Participant joined: $participant");
    });
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: Text("LiveKit –≤ Flutter")),
      body: Center(child: Text("–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...")),
    );
  }
}
```

#### 4.3 –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫–∞ –¥—Ä—É–≥–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞

```dart
import 'package:flutter/material.dart';
import 'package:livekit_client/livekit_client.dart';

class VideoView extends StatefulWidget {
  final Participant participant;

  const VideoView({required this.participant});

  @override
  _VideoViewState createState() => _VideoViewState();
}

class _VideoViewState extends State<VideoView> {
  late VideoTrack videoTrack;

  @override
  void initState() {
    super.initState();

    widget.participant.videoTracks.first.then((track) {
      setState(() {
        videoTrack = track;
      });
    });
  }

  @override
  Widget build(BuildContext context) {
    return VideoViewWidget(
      track: videoTrack,
      fit: BoxFit.cover,
    );
  }
}
```

#### 4.4 –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

```dart
@override
Widget build(BuildContext context) {
  return Scaffold(
    appBar: AppBar(title: Text("LiveKit –≤ Flutter")),
    body: Column(children: [
      Expanded(child: VideoView(participant: room.participants.first)),
      ElevatedButton(onPressed: () async {
        await room.addParticipant(participant: Participant(name: "user456"));
      }, child: Text("–î–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞"))
    ]),
  );
}
```

---

## 5. –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã

1. –ß—Ç–æ —Ç–∞–∫–æ–µ WebRTC –∏ –¥–ª—è —á–µ–≥–æ –æ–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è?
2. –ö–∞–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤—Ö–æ–¥—è—Ç –≤ —Å—Ç–µ–∫ WebRTC? –û–ø–∏—à–∏—Ç–µ –∏—Ö —Ä–æ–ª—å.
3. –ß–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è STUN –æ—Ç TURN —Å–µ—Ä–≤–µ—Ä–∞ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ WebRTC?
4. –î–ª—è —á–µ–≥–æ –Ω—É–∂–Ω–∞ —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏—è –≤ WebRTC? –ü—Ä–∏–≤–µ–¥–∏—Ç–µ –ø—Ä–∏–º–µ—Ä –µ–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.
5. –ö–∞–∫–∏–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç LiveKit –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å Twilio Video API?
6. –ß—Ç–æ —Ç–∞–∫–æ–µ `livekit_client` –∏ –∫–∞–∫ –æ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å Flutter?
7. –û–ø–∏—à–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `livekit_client`.
8. –ö–∞–∫ –≤ `livekit_client` –ø–æ–ª—É—á–∏—Ç—å –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫ –¥—Ä—É–≥–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞?
9. –ö–∞–∫–∏–µ —à–∞–≥–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–º–Ω–∞—Ç—ã –≤ LiveKit —á–µ—Ä–µ–∑ `livekit_client`?
10. –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å WebRTC –±–µ–∑ LiveKit? –ï—Å–ª–∏ –¥–∞, —Ç–æ –∫–∞–∫?

---

## 6. –°–ø–∏—Å–æ–∫ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã –∏ —Å—Å—ã–ª–∫–∏

### –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã:
- [LiveKit Documentation](https://docs.livekit.io/)
- [WebRTC W3C Specifications](https://www.w3.org/TR/webrtc/)

### –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞:
- [GitHub - Flutter WebRTC Example (livekit_client)](https://github.com/livekit/flutter-webrtc-example)
- [Flutter –∏ WebRTC: –ø–æ–ª–Ω—ã–π —Ç—É—Ç–æ—Ä–∏–∞–ª](https://medium.com/@alexdonnelly/flutter-and-webrtc-the-complete-tutorial-a6438175b2d)

### –°—Ç–∞—Ç—å–∏ –∏ –±–ª–æ–≥–∏:
- [WebRTC: How It Works (MDN)](https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API/How_WebRTC_works)
- [LiveKit vs Twilio: –ß—Ç–æ –≤—ã–±—Ä–∞—Ç—å?](https://blog.livekit.io/livekit-vs-twilio-whats-the-difference/)
- [STUN/TURN: How They Work](https://webrtc.org/native-code/stun-turn/)

### –í–∏–¥–µ–æ—É—Ä–æ–∫–∏:
- [YouTube - WebRTC –≤ Flutter (–Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º)](https://www.youtube.com/watch?v=KjH1sF4WgZo)
- [LiveKit: How to Build Real-Time Apps](https://www.youtube.com/watch?v=LJf0cTm29pY)

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:
- **STUN/TURN —Å–µ—Ä–≤–µ—Ä–∞**: Coturn (https://github.com/coturn/coturn)
- **Flutter WebRTC –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ (–±–µ–∑ LiveKit)**: [flutter_webrtc](https://pub.dev/packages/flutter_webrtc)

---

–≠—Ç–∞ –ª–µ–∫—Ü–∏—è –æ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã —Ä–∞–±–æ—Ç—ã —Å WebRTC –∏ LiveKit –≤ Flutter, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –Ω–∞ —É—Ä–æ–≤–Ω–µ Senior. –£–¥–∞—á–∏! üöÄ